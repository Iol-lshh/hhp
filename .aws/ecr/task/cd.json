{
    "family": "hhp",
    "requiresCompatibilities": [
        "FARGATE"
    ],
    "networkMode": "awsvpc",
    "cpu": "256",
    "memory": "512",
    "containerDefinitions": [
        {
            "name": "hhp-app",
            "image": "public.ecr.aws/j6f8n7k3/hhp-app",
            "essential": true,
            "portMappings": [
                {
                    "containerPort": 80,
                    "hostPort": 80
                }
            ],
            "environment": [
                {"name" : "DB_HOSTNAME", "value" : "postgres-db"},
                {"name" : "DB_PORT", "value" : "5432"},
                {"name" : "DB_NAME", "value" : "api_repository"},
                {"name" : "SPRING_DATASOURCE_URL", "value" : "jdbc:postgresql://${DB_HOSTNAME}:${DB_PORT}/${DB_NAME}"},
                {"name" : "SPRING_DATASOURCE_USERNAME", "value" : "lshh"},
                {"name" : "SPRING_DATASOURCE_PASSWORD", "value" : "lshh.com"},
                {"name" : "SPRING_PROFILES_ACTIVE", "value" : "dev"}
            ],
            "dependsOn": [
                {
                    "containerName": "hhp-db",
                    "condition": "HEALTHY"
                }
            ]
        },
        {
            "name": "hhp-db",
            "image": "postgres:latest",
            "essential": true,
            "portMappings": [
                {
                    "containerPort": 5432,
                    "hostPort": 5432
                }
            ],
            "environment": [
                {"name" : "POSTGRES_USER", "value" : "lshh"},
                {"name" : "POSTGRES_PASSWORD", "value" : "lshh.com"},
                {"name" : "POSTGRES_DB", "value" : "api_repository"}
            ]
        }
    ]
}