# 성능 테스트 시나리오

## 종류
1. 성능 테스트 Load Test
   - 일정 시간, 최대 TPS와 평균 응답 속도 확인
   - p95, p99
   - Cpu 60%. 한계치 => user dau 보면서 스케일업 고려
   - Cpu 10% => 일간 트래픽 피크 시간 기준, 걱정 없음
2. 내구성 테스트 Endurance Test
   - 긴 시간, 지속되는 최대 TPS 부하에 대한 안정성
3. 스트레스 테스트
   - 최대 TPS보다, 더 많은 부하를 점진적으로 제공
   - p95, p99
   - 테스트
     - Cpu 30% -> 60% -> 90% -> 터질때까지
     - tps가 나온다. 쓰레드 설정해서 초당 요청수
     - ec2.micro 1대 300tps => ec2.micro 5대 1500tps가 나오는가? 확인
       - 6배가 1500tps가 나온다
         - 이벤트시, 피크대비, 유저수가 3배 예상된다 => 넉넉하게 5배 받을 수 있게 준비
         - db도 스케일 업 아웃 고민할 것
       - 핵심 api가 tps 300ms를 넘어선 안된다. 클라이언트 렌더링 속도도 고려해야 하므로!
       - p95, p99 왜 튀는가? 변인이 너무 많다. tcp 이슈가 충분히 있을 수 있다.
   - 라이브가 굳이 필요하다면,
     - 10% -> +20%만 올라가도록 => 대략적인 숫자가 나온다.
4. 피크 테스트
   - 순간적으로 많은 부하 제공

- 본인 트래픽을 기억해야 한다.
- 스케일아웃 30대를 늘려야한다. => 스케일업 해야하는 타이밍
  - 80% => 20% 는 리소스를 잘 활용하지 못한다.
    - 스왑 메모리 같은 것도 고려해야하기 때문에
  - 전체 평균을 내려줘야 한다.
  - 통찰력을 갖고 일 잘하는 사람이 필요
- JMeter 추천
- 시나리오 => 상황을 만들어놓고 해결하는 본인의 모습을 그릴것!
  - 상황이 발생했다고 가정하고 시나리오 작성
- traceId, MDC, SpringBoot Slueth
- 빠르게 학습, 적용하는게 중요.. 개념..
  - 스켈레톤을 만들어서 적용
  - 샘플 프로젝트
- 미스 없이 
  - 허들을 없앤다.
    - 세가지, 
      - 클라우드 워치와 sns 연결
      - 람다 트리거
      - 람다가 슬랙에 쏘는거
    - 따로따로 해본다.

# 성능 테스트 vs 부하 테스트
- 성능 테스트
  - tps 확인
- 부하테스트
  - 피크 고려, 스켈링 어디까지 고려해야하나


## 이커머스
1. 하나의 유저. 따다다다다... 주문
2. 여러 유저의 동시 주문



1. 장애 탐지 및 전파: 장애가 감지되면 담당자에게 신속히 알립니다.
2. 장애 분류 및 해결: 담당자는 장애를 분류하고, 내용을 다른 부서에 전파함과 동시에 수정 작업을 진행합니다. 장애 대응의 핵심 단계라고 할 수 있습니다.
3. 장애 복구 및 보고: 장애가 해결되면 장애 상황을 정리하고, 정리한 내용을 유관 부서와 공유합니다.
4. 장애 회고: 이해 당사자가 모여 결과를 검토하고 개선점을 논의합니다. 

- 안되면 근본.. hello world로 돌아가서
  - 다 쪼개서 해보자..!
